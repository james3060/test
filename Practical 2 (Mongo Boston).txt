http://media.mongodb.org/zips.json

A. Find all the states that have a city called ”BOSTON”. Find all the states and cities whose
names include the string ”BOST”. Each city has several zip codes.
1)Find states with the city called "BOSTON"
Query:
db.zips.aggregate([
    { $match: { city: "BOSTON" } },
    { $group: { _id: "$state", cities: { $addToSet: "$city" } } }
]);

2)Find states and cities whose names include the string "BOST"
Query:
db.zips.aggregate([
    { $match: { city: { $regex: /BOST/i } } },
    { $group: { _id: { state: "$state", city: "$city" } } }
]);

B. Find the city in each state with the most number of zip codes and rank those cities along with the states using the city populations.
Query:
db.zips.aggregate([
    { $group: { _id: { state: "$state", city: "$city" }, count: { $sum: 1 }, population: { $first: "$pop" } } },
    { $sort: { count: -1 } },
    { $group: { _id: "$_id.state", city: { $first: "$_id.city" }, count: { $first: "$count" }, population: { $first: "$population" } } },
    { $sort: { population: -1 } }
]);

